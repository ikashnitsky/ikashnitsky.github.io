<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Ilya Kashnitsky</title>
<link>https://ikashnitsky.github.io/atom.html</link>
<atom:link href="https://ikashnitsky.github.io/atom.xml" rel="self" type="application/rss+xml"/>
<description>Dr. Ilya Kashnitsky is an Assistant Professor of demography at the Interdisciplinary Centre on Population Dynamics, University of Southern Denmark, Odense, DK.</description>
<generator>quarto-1.2.269</generator>
<lastBuildDate>Sat, 04 Feb 2017 23:00:00 GMT</lastBuildDate>
<item>
  <title>Sex ratios in all countries from Human Mortality Database</title>
  <dc:creator>Ilya Kashnitsky</dc:creator>
  <link>https://ikashnitsky.github.io/2017/hmd-all-sex-ratio/index.html</link>
  <description><![CDATA[ <div class="page-columns page-full"><p>Sex ratios reflect the two basic regularities of human demographics: 1) there are always more boys being born; 2) males experience higher mortality throughout their life-course. The sex ratio at birth does not vary dramatically<sup>1</sup> and is more or less constant at the level of 105-106 boys per 100 girls. Hence, differences in the sex ratio profiles of countries mainly reflect gender gap in mortality. In this post I will compare sex ratios age profiles in all countries included in <a href="http://www.mortality.org">Human Mortality Database</a>.</p><div class="no-row-height column-margin column-container"><li id="fn1"><p><sup>1</sup>&nbsp;There are cases of big deviations from this natural constant. The most well known one is the skewed sex ratio in China, where decades of One Child Policy together with strong traditional son preference resulted in selective abortions. Read more: Frejka et. al (<a href="http://dx.doi.org/10.1111/j.1728-4457.2010.00347.x">2010</a>); Wang (<a href="http://dx.doi.org/10.1111/j.1728-4457.2011.00383.x">2011</a>); Basten and Verropoulou (<a href="http://dx.doi.org/10.1080/00324728.2013.826372">2013</a>).</p></li></div></div>
<p><code>R</code> gives amazing opportunities to grab data fast and easy. Thanks to <a href="https://sites.google.com/site/timriffepersonal/">Tim Riffe’s</a> <code>HMDHFDplus</code> package, one can now download HMD data with just a couple of lines of <code>R</code> code.</p>
<p>There is a handy function in <code>HMDHFDplus</code> package – <code><a href="https://rdrr.io/pkg/HMDHFDplus/man/getHMDcountries.html">getHMDcountries()</a></code>. It lists the codes for all countries in HMD. So it becomes really easy to loop through the database and download data for all countries.</p>
<div class="cell">
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co" style="color: #5E5E5E;"># load required packages</span></span>
<span><span class="kw" style="color: #003B4F;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op" style="color: #5E5E5E;">)</span> <span class="co" style="color: #5E5E5E;"># version 1.0.0</span></span>
<span><span class="kw" style="color: #003B4F;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;"><a href="https://github.com/timriffe/TR1">HMDHFDplus</a></span><span class="op" style="color: #5E5E5E;">)</span> <span class="co" style="color: #5E5E5E;"># version 1.1.8</span></span>
<span></span>
<span><span class="va" style="color: #111111;">country</span> <span class="op" style="color: #5E5E5E;">&lt;-</span> <span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/pkg/HMDHFDplus/man/getHMDcountries.html">getHMDcountries</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="op" style="color: #5E5E5E;">)</span></span>
<span></span>
<span><span class="va" style="color: #111111;">exposures</span> <span class="op" style="color: #5E5E5E;">&lt;-</span> <span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="op" style="color: #5E5E5E;">)</span></span>
<span><span class="kw" style="color: #003B4F;">for</span> <span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">i</span> <span class="kw" style="color: #003B4F;">in</span> <span class="fl" style="color: #AD0000;">1</span><span class="op" style="color: #5E5E5E;">:</span> <span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">country</span><span class="op" style="color: #5E5E5E;">)</span><span class="op" style="color: #5E5E5E;">)</span> <span class="op" style="color: #5E5E5E;">{</span></span>
<span>        <span class="va" style="color: #111111;">cnt</span> <span class="op" style="color: #5E5E5E;">&lt;-</span> <span class="va" style="color: #111111;">country</span><span class="op" style="color: #5E5E5E;">[</span><span class="va" style="color: #111111;">i</span><span class="op" style="color: #5E5E5E;">]</span></span>
<span>        <span class="va" style="color: #111111;">exposures</span><span class="op" style="color: #5E5E5E;">[[</span><span class="va" style="color: #111111;">cnt</span><span class="op" style="color: #5E5E5E;">]</span><span class="op" style="color: #5E5E5E;">]</span> <span class="op" style="color: #5E5E5E;">&lt;-</span> <span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/pkg/HMDHFDplus/man/readHMDweb.html">readHMDweb</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">cnt</span>, <span class="st" style="color: #20794D;">"Exposures_1x1"</span>,</span>
<span>                                       <span class="va" style="color: #111111;">ik_user_hmd</span>, <span class="va" style="color: #111111;">ik_pass_hmd</span><span class="op" style="color: #5E5E5E;">)</span></span>
<span>        </span>
<span>        <span class="co" style="color: #5E5E5E;"># let's print the progress</span></span>
<span>        <span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">i</span>,<span class="st" style="color: #20794D;">'out of'</span>,<span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">country</span><span class="op" style="color: #5E5E5E;">)</span><span class="op" style="color: #5E5E5E;">)</span> </span>
<span><span class="op" style="color: #5E5E5E;">}</span></span></code></pre></div>
</div>
<p><em>Please note, the arguments <code>ik_user_hmd</code> and <code>ik_pass_hmd</code> are my login credidantials at the website of <a href="http://www.mortality.org">Human Mortality Database</a>, which are stored locally at my computer. In order to access the data, one needs to create an account at http://www.mortality.org/ and provide his own credidantials to the <code><a href="https://rdrr.io/pkg/HMDHFDplus/man/readHMDweb.html">readHMDweb()</a></code> function.</em></p>
<p>Next, I select 2012 for comparison – it is quite recent, and for most of the HMD countries there are data for 2012. The loop goes through each of the countries’ dataframe in <code>exposures</code> list, selects data for 2012 and calculates sex ratio at each age. I also remove data for several populations (like East and West Germany separately).</p>
<div class="cell">
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va" style="color: #111111;">sr_age</span> <span class="op" style="color: #5E5E5E;">&lt;-</span> <span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="op" style="color: #5E5E5E;">)</span></span>
<span></span>
<span><span class="kw" style="color: #003B4F;">for</span> <span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">i</span> <span class="kw" style="color: #003B4F;">in</span> <span class="fl" style="color: #AD0000;">1</span><span class="op" style="color: #5E5E5E;">:</span><span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">exposures</span><span class="op" style="color: #5E5E5E;">)</span><span class="op" style="color: #5E5E5E;">)</span> <span class="op" style="color: #5E5E5E;">{</span></span>
<span>        <span class="va" style="color: #111111;">di</span> <span class="op" style="color: #5E5E5E;">&lt;-</span> <span class="va" style="color: #111111;">exposures</span><span class="op" style="color: #5E5E5E;">[[</span><span class="va" style="color: #111111;">i</span><span class="op" style="color: #5E5E5E;">]</span><span class="op" style="color: #5E5E5E;">]</span></span>
<span>        <span class="va" style="color: #111111;">sr_agei</span> <span class="op" style="color: #5E5E5E;">&lt;-</span> <span class="va" style="color: #111111;">di</span> <span class="op" style="color: #5E5E5E;"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">Year</span>,<span class="va" style="color: #111111;">Age</span>,<span class="va" style="color: #111111;">Female</span>,<span class="va" style="color: #111111;">Male</span><span class="op" style="color: #5E5E5E;">)</span> <span class="op" style="color: #5E5E5E;"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>                <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">Year</span> <span class="op" style="color: #5E5E5E;"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fl" style="color: #AD0000;">2012</span><span class="op" style="color: #5E5E5E;">)</span> <span class="op" style="color: #5E5E5E;"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>                <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="op" style="color: #5E5E5E;">-</span><span class="va" style="color: #111111;">Year</span><span class="op" style="color: #5E5E5E;">)</span> <span class="op" style="color: #5E5E5E;"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>                <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/mutate.html">transmute</a></span><span class="op" style="color: #5E5E5E;">(</span>country <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">exposures</span><span class="op" style="color: #5E5E5E;">)</span><span class="op" style="color: #5E5E5E;">[</span><span class="va" style="color: #111111;">i</span><span class="op" style="color: #5E5E5E;">]</span>,</span>
<span>                          age <span class="op" style="color: #5E5E5E;">=</span> <span class="va" style="color: #111111;">Age</span>, sr_age <span class="op" style="color: #5E5E5E;">=</span> <span class="va" style="color: #111111;">Male</span> <span class="op" style="color: #5E5E5E;">/</span> <span class="va" style="color: #111111;">Female</span> <span class="op" style="color: #5E5E5E;">*</span> <span class="fl" style="color: #AD0000;">100</span><span class="op" style="color: #5E5E5E;">)</span></span>
<span>        <span class="va" style="color: #111111;">sr_age</span><span class="op" style="color: #5E5E5E;">[[</span><span class="va" style="color: #111111;">i</span><span class="op" style="color: #5E5E5E;">]</span><span class="op" style="color: #5E5E5E;">]</span> <span class="op" style="color: #5E5E5E;">&lt;-</span> <span class="va" style="color: #111111;">sr_agei</span></span>
<span><span class="op" style="color: #5E5E5E;">}</span></span>
<span><span class="va" style="color: #111111;">sr_age</span> <span class="op" style="color: #5E5E5E;">&lt;-</span> <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">sr_age</span><span class="op" style="color: #5E5E5E;">)</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;"># remove optional populations</span></span>
<span><span class="va" style="color: #111111;">sr_age</span> <span class="op" style="color: #5E5E5E;">&lt;-</span> <span class="va" style="color: #111111;">sr_age</span> <span class="op" style="color: #5E5E5E;"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="op" style="color: #5E5E5E;">!</span><span class="va" style="color: #111111;">country</span> <span class="op" style="color: #5E5E5E;"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="st" style="color: #20794D;">"FRACNP"</span>,<span class="st" style="color: #20794D;">"DEUTE"</span>,<span class="st" style="color: #20794D;">"DEUTW"</span>,<span class="st" style="color: #20794D;">"GBRCENW"</span>,<span class="st" style="color: #20794D;">"GBR_NP"</span><span class="op" style="color: #5E5E5E;">)</span><span class="op" style="color: #5E5E5E;">)</span></span></code></pre></div>
</div>
<p>After age 90, sex ratios become quite jerky due to the relatively small numbers of survivors. I decided to aggregate data after the age 90.</p>
<div class="cell">
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co" style="color: #5E5E5E;"># summarize all ages older than 90 (too jerky)</span></span>
<span><span class="va" style="color: #111111;">sr_age_90</span> <span class="op" style="color: #5E5E5E;">&lt;-</span> <span class="va" style="color: #111111;">sr_age</span> <span class="op" style="color: #5E5E5E;"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">age</span> <span class="op" style="color: #5E5E5E;"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fl" style="color: #AD0000;">90</span><span class="op" style="color: #5E5E5E;">:</span><span class="fl" style="color: #AD0000;">110</span><span class="op" style="color: #5E5E5E;">)</span> <span class="op" style="color: #5E5E5E;"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>        <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">country</span><span class="op" style="color: #5E5E5E;">)</span> <span class="op" style="color: #5E5E5E;"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op" style="color: #5E5E5E;">(</span>sr_age <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">sr_age</span>, na.rm <span class="op" style="color: #5E5E5E;">=</span> <span class="cn" style="color: #8f5902;">T</span><span class="op" style="color: #5E5E5E;">)</span><span class="op" style="color: #5E5E5E;">)</span> <span class="op" style="color: #5E5E5E;"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="op" style="color: #5E5E5E;">)</span> <span class="op" style="color: #5E5E5E;"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/mutate.html">transmute</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">country</span>, age<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">90</span>, <span class="va" style="color: #111111;">sr_age</span><span class="op" style="color: #5E5E5E;">)</span></span>
<span></span>
<span><span class="va" style="color: #111111;">df_plot</span> <span class="op" style="color: #5E5E5E;">&lt;-</span> <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">sr_age</span> <span class="op" style="color: #5E5E5E;"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="op" style="color: #5E5E5E;">!</span><span class="va" style="color: #111111;">age</span> <span class="op" style="color: #5E5E5E;"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fl" style="color: #AD0000;">90</span><span class="op" style="color: #5E5E5E;">:</span><span class="fl" style="color: #AD0000;">110</span><span class="op" style="color: #5E5E5E;">)</span>, <span class="va" style="color: #111111;">sr_age_90</span><span class="op" style="color: #5E5E5E;">)</span></span></code></pre></div>
</div>
<p>Finally, I plot the resulting sex ratios.</p>
<div class="cell">
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co" style="color: #5E5E5E;"># get nice font</span></span>
<span><span class="kw" style="color: #003B4F;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;"><a href="https://github.com/wch/extrafont">extrafont</a></span><span class="op" style="color: #5E5E5E;">)</span></span>
<span><span class="va" style="color: #111111;">myfont</span> <span class="op" style="color: #5E5E5E;">&lt;-</span> <span class="st" style="color: #20794D;">"Roboto Condensed"</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;"># finaly - plot</span></span>
<span><span class="va" style="color: #111111;">gg</span> <span class="op" style="color: #5E5E5E;">&lt;-</span> <span class="fu" style="color: #4758AB;"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">df_plot</span>, <span class="fu" style="color: #4758AB;"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">age</span>, <span class="va" style="color: #111111;">sr_age</span>, color <span class="op" style="color: #5E5E5E;">=</span> <span class="va" style="color: #111111;">country</span>, group <span class="op" style="color: #5E5E5E;">=</span> <span class="va" style="color: #111111;">country</span><span class="op" style="color: #5E5E5E;">)</span><span class="op" style="color: #5E5E5E;">)</span><span class="op" style="color: #5E5E5E;">+</span></span>
<span>        <span class="fu" style="color: #4758AB;"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_hline</a></span><span class="op" style="color: #5E5E5E;">(</span>yintercept <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">100</span>, color <span class="op" style="color: #5E5E5E;">=</span> <span class="st" style="color: #20794D;">'grey50'</span>, size <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">1</span><span class="op" style="color: #5E5E5E;">)</span><span class="op" style="color: #5E5E5E;">+</span></span>
<span>        <span class="fu" style="color: #4758AB;"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op" style="color: #5E5E5E;">(</span>size <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">1</span><span class="op" style="color: #5E5E5E;">)</span><span class="op" style="color: #5E5E5E;">+</span></span>
<span>        <span class="fu" style="color: #4758AB;"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op" style="color: #5E5E5E;">(</span>limits <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="fl" style="color: #AD0000;">0</span>, <span class="fl" style="color: #AD0000;">120</span><span class="op" style="color: #5E5E5E;">)</span>, expand <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="fl" style="color: #AD0000;">0</span>, <span class="fl" style="color: #AD0000;">0</span><span class="op" style="color: #5E5E5E;">)</span>, breaks <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="fl" style="color: #AD0000;">0</span>, <span class="fl" style="color: #AD0000;">120</span>, <span class="fl" style="color: #AD0000;">20</span><span class="op" style="color: #5E5E5E;">)</span><span class="op" style="color: #5E5E5E;">)</span><span class="op" style="color: #5E5E5E;">+</span></span>
<span>        <span class="fu" style="color: #4758AB;"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op" style="color: #5E5E5E;">(</span>limits <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="fl" style="color: #AD0000;">0</span>, <span class="fl" style="color: #AD0000;">90</span><span class="op" style="color: #5E5E5E;">)</span>, expand <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="fl" style="color: #AD0000;">0</span>, <span class="fl" style="color: #AD0000;">0</span><span class="op" style="color: #5E5E5E;">)</span>, breaks <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="fl" style="color: #AD0000;">0</span>, <span class="fl" style="color: #AD0000;">80</span>, <span class="fl" style="color: #AD0000;">20</span><span class="op" style="color: #5E5E5E;">)</span><span class="op" style="color: #5E5E5E;">)</span><span class="op" style="color: #5E5E5E;">+</span></span>
<span>        <span class="fu" style="color: #4758AB;"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="st" style="color: #20794D;">'Age'</span><span class="op" style="color: #5E5E5E;">)</span><span class="op" style="color: #5E5E5E;">+</span></span>
<span>        <span class="fu" style="color: #4758AB;"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="st" style="color: #20794D;">'Sex ratio, males per 100 females'</span><span class="op" style="color: #5E5E5E;">)</span><span class="op" style="color: #5E5E5E;">+</span></span>
<span>        <span class="fu" style="color: #4758AB;"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="op" style="color: #5E5E5E;">~</span><span class="va" style="color: #111111;">country</span>, ncol<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">6</span><span class="op" style="color: #5E5E5E;">)</span><span class="op" style="color: #5E5E5E;">+</span></span>
<span>        <span class="fu" style="color: #4758AB;"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op" style="color: #5E5E5E;">(</span>base_family <span class="op" style="color: #5E5E5E;">=</span> <span class="va" style="color: #111111;">myfont</span>, base_size <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">15</span><span class="op" style="color: #5E5E5E;">)</span><span class="op" style="color: #5E5E5E;">+</span></span>
<span>        <span class="fu" style="color: #4758AB;"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op" style="color: #5E5E5E;">(</span>legend.position<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">'none'</span>,</span>
<span>              panel.border <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_rect</a></span><span class="op" style="color: #5E5E5E;">(</span>size <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">.5</span>, fill <span class="op" style="color: #5E5E5E;">=</span> <span class="cn" style="color: #8f5902;">NA</span><span class="op" style="color: #5E5E5E;">)</span><span class="op" style="color: #5E5E5E;">)</span></span>
<span></span>
<span><span class="va" style="color: #111111;">gg</span></span></code></pre></div>
</div>
<p><img src="https://ikashnitsky.github.io/2017/hmd-all-sex-ratio/hmd-sex-ratios.png" class="img-fluid"></p>
<p>There is quite a variety in the sex ratio profiles. If the initial prevalence of males equalizes in Japan, Sweden, or Norway at around 60, in Russia, Belarus, and Ukraine this happens at around 30 due to very high male mortality. In many countries there are pronounced bumps in the sex ratio at ages 20-30, that are likely to be caused by international migration. For example, Scotland, Northern Ireland, Portugal, and New Zealand are experiencing substantial outflow of young men.</p>
<p>What happened in Taiwan?</p>
<p><em>This post is based on my earlier <a href="https://twitter.com/ikashnitsky/status/785973218775478273">tweet</a> and <a href="https://gist.github.com/ikashnitsky/a578eaef6b122aa2aa2e3469fd2dcbe7">gist</a>.</em></p>
<hr>


<!-- -->

 ]]></description>
  <category>r</category>
  <category>hmd</category>
  <category>death rates</category>
  <guid>https://ikashnitsky.github.io/2017/hmd-all-sex-ratio/index.html</guid>
  <pubDate>Sat, 04 Feb 2017 23:00:00 GMT</pubDate>
  <media:content url="https://ikashnitsky.github.io/2017/hmd-all-sex-ratio/hmd-sex-ratios.png" medium="image" type="image/png" height="216" width="144"/>
</item>
<item>
  <title>Hello R world post</title>
  <dc:creator>Ilya Kashnitsky</dc:creator>
  <link>https://ikashnitsky.github.io/2017/hello-r-world/index.html</link>
  <description><![CDATA[ <p>Welcome to my blog!</p>
<p>My name is Ilya, I am a demographer. Here I plan to post some research related stuff. As I am crazy about <a href="https://www.r-project.org">R</a>, my post will touch upon this tool/environment – I will share some tricks and cool visualizations. Eventually, I hope to contribute to the amazing <a href="https://www.r-bloggers.com">R-bloggers</a> project. First, I am going to post older bits – to gain momentum.</p>
<hr>
<p>Just to start with, let me show you a small and handy self-written R function.<br>
Quite often, visualizing data in R, we compose color palettes manually. It is nice to have a function that shows the actual colors of a vector with color values. Here it is.</p>
<div class="cell">
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va" style="color: #111111;">glimpse_colors</span> <span class="op" style="color: #5E5E5E;">&lt;-</span> <span class="kw" style="color: #003B4F;">function</span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">colors_string</span><span class="op" style="color: #5E5E5E;">)</span><span class="op" style="color: #5E5E5E;">{</span></span>
<span>        <span class="va" style="color: #111111;">n</span> <span class="op" style="color: #5E5E5E;">&lt;-</span> <span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">colors_string</span><span class="op" style="color: #5E5E5E;">)</span></span>
<span>        <span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="fl" style="color: #AD0000;">1</span><span class="op" style="color: #5E5E5E;">:</span><span class="va" style="color: #111111;">n</span>, breaks <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">0</span><span class="op" style="color: #5E5E5E;">:</span><span class="va" style="color: #111111;">n</span>, col <span class="op" style="color: #5E5E5E;">=</span> <span class="va" style="color: #111111;">colors_string</span><span class="op" style="color: #5E5E5E;">)</span></span>
<span><span class="op" style="color: #5E5E5E;">}</span></span></code></pre></div>
</div>
<p>The function takes a vector of colors as input and produces a basic uniform histogram with one bar for each color, filled accordingly. Let’s try it out. First, we create some colors, and then visualize them.</p>
<div class="cell">
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw" style="color: #003B4F;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">RColorBrewer</span><span class="op" style="color: #5E5E5E;">)</span></span>
<span><span class="va" style="color: #111111;">pal</span> <span class="op" style="color: #5E5E5E;">&lt;-</span> <span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/pkg/RColorBrewer/man/ColorBrewer.html">brewer.pal</a></span><span class="op" style="color: #5E5E5E;">(</span>n <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">9</span>, name <span class="op" style="color: #5E5E5E;">=</span> <span class="st" style="color: #20794D;">'BrBG'</span><span class="op" style="color: #5E5E5E;">)</span></span>
<span><span class="fu" style="color: #4758AB;">glimpse_colors</span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">pal</span><span class="op" style="color: #5E5E5E;">)</span></span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://ikashnitsky.github.io/2017/hello-r-world/index_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Enjoy!</p>
<p>P.S. If something similar exists in one of the well known packages, please tell me.</p>


<!-- -->


 ]]></description>
  <category>r</category>
  <guid>https://ikashnitsky.github.io/2017/hello-r-world/index.html</guid>
  <pubDate>Sat, 28 Jan 2017 23:00:00 GMT</pubDate>
</item>
<item>
  <title>demographeR’s notes</title>
  <link>https://ikashnitsky.github.io/index.html</link>
  <description><![CDATA[ 




<section id="section" class="level2">
<h2 class="anchored" data-anchor-id="section">2022</h2>
<div id="listing-posts_2022" class="quarto-listing quarto-listing-container-custom">
<div class="list blog">
</div>
<div class="listing-no-matching d-none">
No matching items
</div>
</div>
</section>
<section id="section-1" class="level2">
<h2 class="anchored" data-anchor-id="section-1">2021</h2>
<div id="listing-posts_2021" class="quarto-listing quarto-listing-container-custom">
<div class="list blog">
</div>
<div class="listing-no-matching d-none">
No matching items
</div>
</div>
</section>
<section id="section-2" class="level2">
<h2 class="anchored" data-anchor-id="section-2">2020</h2>
<div id="listing-posts_2020" class="quarto-listing quarto-listing-container-custom">
<div class="list blog">
</div>
<div class="listing-no-matching d-none">
No matching items
</div>
</div>
</section>
<section id="section-3" class="level2">
<h2 class="anchored" data-anchor-id="section-3">2019</h2>
<div id="listing-posts_2019" class="quarto-listing quarto-listing-container-custom">
<div class="list blog">
</div>
<div class="listing-no-matching d-none">
No matching items
</div>
</div>
</section>
<section id="section-4" class="level2">
<h2 class="anchored" data-anchor-id="section-4">2018</h2>
<div id="listing-posts_2018" class="quarto-listing quarto-listing-container-custom">
<div class="list blog">
</div>
<div class="listing-no-matching d-none">
No matching items
</div>
</div>
</section>
<section id="section-5" class="level2">
<h2 class="anchored" data-anchor-id="section-5">2017</h2>
<div id="listing-posts_2017" class="quarto-listing quarto-listing-container-custom">
<div class="list blog">
    <div class="blog-entry" data-index="0" data-categories="r,hmd,death rates" data-listing-date-sort="1486249200000" data-listing-file-modified-sort="1671364912790" data-listing-reading-time-sort="4.44">
        <div class="metadata">          
            <p class="date listing-date">February 5, 2017</p>
        </div>
        <div class="body">
            <p class="title listing-title"><a href="./2017/hmd-all-sex-ratio/index.html">Sex ratios in all countries from Human Mortality Database</a></p>
            <div class="post-categories listing-categories">
                <div class="post-category listing-category" onclick="window.quartoListingCategory('r'); return false;">
                    r
                </div>
                <div class="post-category listing-category" onclick="window.quartoListingCategory('hmd'); return false;">
                    hmd
                </div>
                <div class="post-category listing-category" onclick="window.quartoListingCategory('death rates'); return false;">
                    death rates
                </div>
            </div>
            <p class="description listing-description"><!-- desc(5A0113B34292)[max=175]:2017/hmd-all-sex-ratio/index.html --></p>
        </div>
        <div class="thumbnail">
            <img src="https://ikashnitsky.github.io/2017/hmd-all-sex-ratio/hmd-sex-ratios.png" alt="Sex ratios in all countries from Human Mortality Database" title="Sex ratios in all countries from Human Mortality Database">
        </div>
    </div>
    <div class="blog-entry" data-index="1" data-categories="r" data-listing-date-sort="1485644400000" data-listing-file-modified-sort="1671355427415" data-listing-reading-time-sort="0.99">
        <div class="metadata">          
            <p class="date listing-date">January 29, 2017</p>
        </div>
        <div class="body">
            <p class="title listing-title"><a href="./2017/hello-r-world/index.html">Hello R world post</a></p>
            <div class="post-categories listing-categories">
                <div class="post-category listing-category" onclick="window.quartoListingCategory('r'); return false;">
                    r
                </div>
            </div>
            <p class="description listing-description"><!-- desc(5A0113B34292)[max=175]:2017/hello-r-world/index.html --></p>
        </div>
    </div>
</div>
<div class="listing-no-matching d-none">
No matching items
</div>
</div>



</section>

 ]]></description>
  <guid>https://ikashnitsky.github.io/index.html</guid>
  <pubDate>Sun, 18 Dec 2022 12:02:08 GMT</pubDate>
</item>
</channel>
</rss>
